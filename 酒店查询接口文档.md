# 酒店查询接口文档

## 1. 概述

- 用途：根据首页查询条件返回酒店列表，用于酒店查询页展示。
- 调用方：`hotel-user` 前端（`src/pages/index/index.tsx`）。
- 实现位置：前端请求封装在 `src/services/hotel.ts`。

## 2. 接口信息

- 接口名称：酒店搜索
- 请求方式：`POST`
- 请求路径：`/api/hotels/search`
- 完整地址示例：`http://localhost:8080/api/hotels/search`
- Content-Type：`application/json`

> 前端支持通过环境变量 `TARO_APP_API_BASE_URL` 配置服务地址；未配置时默认 `http://localhost:8080`。

## 3. 请求参数

### 3.1 Body 参数

| 参数名 | 类型 | 必填 | 说明 | 示例 |
| --- | --- | --- | --- | --- |
| city | string | 是 | 城市名 | 上海 |
| keyword | string | 否 | 关键字（酒店名/地标） | 外滩 |
| checkInDate | string | 是 | 入住日期，格式 `YYYY-MM-DD` | 2026-02-20 |
| checkOutDate | string | 是 | 离店日期，格式 `YYYY-MM-DD` | 2026-02-21 |
| tags | string[] | 否 | 筛选标签数组 | ["近地铁", "免费停车场"] |

### 3.2 请求示例

```json
{
  "city": "上海",
  "keyword": "外滩",
  "checkInDate": "2026-02-20",
  "checkOutDate": "2026-02-21",
  "tags": ["近地铁", "免费停车场"]
}
```

## 4. 响应参数

### 4.1 响应结构

| 字段 | 类型 | 说明 |
| --- | --- | --- |
| code | number | 业务状态码，`0` 表示成功 |
| message | string | 状态说明 |
| data | object | 结果数据 |

`data` 字段结构如下：

| 字段 | 类型 | 说明 |
| --- | --- | --- |
| total | number | 命中酒店总数 |
| list | HotelItem[] | 酒店列表 |

`HotelItem` 字段：

| 字段 | 类型 | 说明 |
| --- | --- | --- |
| hotelId | string | 酒店唯一标识 |
| hotelName | string | 酒店名称 |
| address | string | 酒店地址 |
| coverImage | string | 酒店封面图 URL，可为空字符串 |
| tags | string[] | 酒店标签 |
| minPrice | number | 最低价（人民币） |
| score | number | 评分（如 4.7） |
| commentCount | number | 点评数量 |

### 4.2 成功响应示例

```json
{
  "code": 0,
  "message": "success",
  "data": {
    "total": 2,
    "list": [
      {
        "hotelId": "10001",
        "hotelName": "上海外滩智选酒店",
        "address": "上海市黄浦区中山东一路88号",
        "coverImage": "https://example.com/hotel/10001.jpg",
        "tags": ["近地铁", "免费停车场", "亲子酒店"],
        "minPrice": 488,
        "score": 4.8,
        "commentCount": 2134
      },
      {
        "hotelId": "10002",
        "hotelName": "上海陆家嘴云端酒店",
        "address": "上海市浦东新区世纪大道100号",
        "coverImage": "",
        "tags": ["豪华型", "免费洗衣服务"],
        "minPrice": 699,
        "score": 4.7,
        "commentCount": 1680
      }
    ]
  }
}
```

### 4.3 失败响应示例

```json
{
  "code": 1001,
  "message": "入住日期不能晚于离店日期",
  "data": {
    "total": 0,
    "list": []
  }
}
```

## 5. 错误码建议

| code | 含义 |
| --- | --- |
| 0 | 成功 |
| 1001 | 参数校验失败 |
| 1002 | 城市不支持或不存在 |
| 1003 | 查询条件无效 |
| 2000 | 服务内部异常 |

## 6. 后端实现建议

- 校验日期合法性（`checkInDate < checkOutDate`，且日期格式正确）。
- 支持 `keyword` 模糊匹配与 `tags` 多条件筛选。
- 返回空列表时保持 `code = 0`，前端会展示空态。
- 启用 CORS（H5 联调场景）并允许 `Content-Type: application/json`。

## 7. 联调要点

- 前端点击“查找酒店”后会调用该接口并处理成功/失败 Toast。
- `code !== 0` 或 HTTP 非 2xx 时前端按失败处理。
- 当 `coverImage` 为空或加载失败时，前端展示占位内容。
